---
phase: 08-complex-ui-migration
plan: 02
type: execute
wave: 1
depends_on: ["08-complex-ui-migration/01"]
files_modified: ["src/features/LightDetail/LightDetail.tsx"]
autonomous: true
must_haves:
  truths:
    - "Light controls use presets for colors"
    - "Tabs separate Color and White temperature controls"
    - "Changes update Home Assistant immediately (throttled)"
  artifacts:
    - path: "src/features/LightDetail/LightDetail.tsx"
      provides: "Detailed light control UI"
  key_links:
    - from: "src/features/LightDetail/LightDetail.tsx"
      to: "src/components/ui/adaptive-dialog.tsx"
      via: "Implementation"
---

<objective>
Migrate the Light Detail view to use the new Adaptive Dialog and Slider components, implementing the "Presets Only" color strategy.

Purpose: Modernize the light control experience with responsive, touch-friendly UI.
Output: Refactored `LightDetail.tsx`.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/08-complex-ui-migration/08-CONTEXT.md
@src/features/LightDetail/LightDetail.tsx
@src/components/ui/adaptive-dialog.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Adaptive Layout</name>
  <files>src/features/LightDetail/LightDetail.tsx</files>
  <action>
    - Replace the existing MUI Dialog/Modal with `AdaptiveDialog`.
    - Structure the content with a clean header (Title, Toggle Switch).
  </action>
  <verify>LightDetail opens using the new AdaptiveDialog.</verify>
  <done>Layout scaffolded.</done>
</task>

<task type="auto">
  <name>Task 2: Implement Brightness & Temp Sliders</name>
  <files>src/features/LightDetail/LightDetail.tsx</files>
  <action>
    - Replace MUI Sliders with the `Slider` component from Plan 01.
    - Implement "Live Text Update" (show percentage/Kelvin value).
    - Use Tabs to separate "Color" (if supported) and "White" modes.
  </action>
  <verify>Sliders work and update state.</verify>
  <done>Sliders implemented.</done>
</task>

<task type="auto">
  <name>Task 3: Implement Color Presets</name>
  <files>src/features/LightDetail/LightDetail.tsx</files>
  <action>
    - Implement the "Presets Only" UI using a grid of colored circles.
    - Remove complex color wheel if present.
    - Ensure selection updates the light color.
  </action>
  <verify>Clicking a preset changes the light color.</verify>
  <done>Color presets implemented.</done>
</task>

</tasks>

<verification>
1. Open Light Detail for a light entity.
2. Verify Brightness slider works smoothly.
3. Verify switching between Color and White tabs works.
4. Verify Color Presets change the color.
5. Verify layout is responsive (Drawer on mobile, Dialog on desktop).
</verification>

<success_criteria>
LightDetail is fully refactored to shadcn/Tailwind and uses the new infrastructure.
</success_criteria>

<output>
After completion, create `.planning/phases/08-complex-ui-migration/08-02-SUMMARY.md`
</output>
