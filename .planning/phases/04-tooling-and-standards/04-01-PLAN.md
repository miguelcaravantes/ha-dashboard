---
phase: 04-tooling-and-standards
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  [
    package.json,
    eslint.config.js,
    .prettierrc.json,
    .prettierignore,
    .vscode/settings.json,
  ]
autonomous: true
must_haves:
  truths:
    - 'Prettier dependencies and config files (including .prettierignore) are removed'
    - 'ESLint Stylistic and JSONC are installed and configured'
    - 'IDE auto-formats on save using only ESLint'
  artifacts:
    - path: 'eslint.config.js'
      provides: 'Consolidated linting and formatting rules for JS/TS/JSON'
    - path: '.vscode/settings.json'
      provides: 'Workspace-level IDE formatting configuration'
  key_links:
    - from: 'package.json'
      to: 'eslint.config.js'
      via: 'scripts'
      pattern: 'eslint'
---

<objective>
Remove Prettier and replace it with ESLint Stylistic for code formatting, adding JSON support via eslint-plugin-jsonc. Consolidate tooling into a single source of truth.

Note: CSS and Markdown formatting are considered out of scope for this phase.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-tooling-and-standards/04-CONTEXT.md
@.planning/phases/04-tooling-and-standards/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Purge Prettier</name>
  <files>package.json, .prettierrc.json, .prettierignore</files>
  <action>
    1. Uninstall Prettier-related packages: `npm uninstall prettier eslint-config-prettier eslint-plugin-prettier`.
    2. Delete `.prettierrc.json`, `.prettierignore`, and any other detected Prettier config variants (e.g., `.prettierrc`, `.prettierrc.yaml`).
    3. Update `package.json` scripts:
       - Update "lint" script to `eslint . --max-warnings 0`.
       - Add "format" script as an alias to `eslint . --fix`.
  </action>
  <verify>
    - `npm list prettier` returns empty.
    - Prettier config files no longer exist on disk.
    - `npm run lint` executes without trying to use Prettier plugins.
  </verify>
  <done>Prettier is fully removed from dependencies and disk.</done>
</task>

<task type="auto">
  <name>Task 2: Configure ESLint Stylistic & JSONC</name>
  <files>eslint.config.js</files>
  <action>
    1. Install plugins: `npm install -D @stylistic/eslint-plugin eslint-plugin-jsonc`.
    2. Update `eslint.config.js` to integrate stylistic rules and JSONC support.
    3. Enforce stylistic rules:
       - `@stylistic/semi`: "always"
       - `@stylistic/quotes`: ["single", { "avoidEscape": true }]
       - `@stylistic/indent`: [2]
       - `@stylistic/comma-dangle`: ["error", "always-multiline"]
       - `@stylistic/jsx-quotes`: ["error", "prefer-double"]
    4. Configure `eslint-plugin-jsonc` to handle JSON formatting.
    5. Ensure these rules are applied to all `.js`, `.jsx`, `.ts`, `.tsx`, and `.json` files.
  </action>
  <verify>
    - `npm run lint` fails on files (including JSON) with incorrect formatting.
    - `npm run format` (eslint --fix) corrects the formatting.
  </verify>
  <done>ESLint Stylistic and JSONC manage formatting with zero conflicts.</done>
</task>

<task type="auto">
  <name>Task 3: IDE Integration</name>
  <files>.vscode/settings.json</files>
  <action>
    1. Create `.vscode/settings.json` (if it doesn't exist).
    2. Add/Update settings to:
       - Set ESLint as the default formatter for javascript, javascriptreact, typescript, typescriptreact, and json.
       - Enable `editor.formatOnSave`.
       - Enable `editor.codeActionsOnSave` with `source.fixAll.eslint`.
       - Explicitly disable `prettier.enable` for the workspace to prevent extension interference.
  </action>
  <verify>
    - Opening a file in VS Code and saving it triggers ESLint auto-fix.
    - Prettier is not used for formatting in the workspace.
  </verify>
  <done>IDE provides automatic formatting on save using only ESLint.</done>
</task>

</tasks>

<verification>
1. Run `npm run lint` to ensure all files (including package.json) comply with the new rules.
2. Verify that no Prettier artifacts remain.
3. Confirm VS Code formatting works as expected.
</verification>

<success_criteria>

- Prettier is uninstalled and its config is deleted.
- ESLint Stylistic and JSONC rules are active and enforced.
- Build/Lint pass with zero warnings.
- VS Code auto-formats on save using ESLint.
  </success_criteria>

<output>
After completion, create `.planning/phases/04-tooling-and-standards/04-01-SUMMARY.md`
</output>
