---
phase: 02-core-modernization
plan: 03
type: execute
wave: 2
depends_on: ['02-01']
files_modified: [src/theme.ts, src/App.jsx]
autonomous: true
must_haves:
  truths:
    - 'Theming uses CSS variables for instant mode switching'
    - 'Light/Dark mode can be switched without full re-render of styled components'
  artifacts:
    - path: 'src/theme.ts'
      provides: 'Modern MUI theme configuration with CSS variables'
  key_links:
    - from: 'src/App.jsx'
      to: 'src/theme.ts'
      via: 'ThemeProvider'
---

<objective>
Modernize the theming system using MUI's CSS variables engine.
Purpose: Enable instant light/dark mode switching and improve performance by reducing the need for runtime style recalculations.
Output: Dedicated theme configuration and updated App component.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/02-core-modernization/02-01-SUMMARY.md
@src/App.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement CSS Variable Theme</name>
  <files>src/theme.ts</files>
  <action>
    Create `src/theme.ts`.
    Use MUI's new theming engine (v6/v7) to define a theme that supports CSS variables (e.g., using `createTheme` with `cssVariables: true` or the new `extendTheme` if applicable in v7).
    Define primary color (lightBlue[300]) and background overrides for dark mode.
    Ensure 'Roboto' font is correctly integrated.
  </action>
  <verify>Check for cssVariables: true in theme configuration</verify>
  <done>Theme is configured to use CSS variables.</done>
</task>

<task type="auto">
  <name>Task 2: Update App component to use the new Theme Engine</name>
  <files>src/App.jsx</files>
  <action>
    Import the new theme from `src/theme.ts`.
    Update `ThemeProvider` (or use `CssVarsProvider` if required by the new engine) in `src/App.jsx`.
    Remove legacy hardcoded theme logic and GlobalStyles that are now handled by the theme or baseline.
    Ensure `react-panel` and `body` styles are preserved.
  </action>
  <verify>npm run build</verify>
  <done>App component is simplified and uses the modern theming engine.</done>
</task>

</tasks>

<verification>
Verify that inspecting elements in the browser shows CSS variables (e.g., `--mui-palette-primary-main`).
Verify that switching dark mode (e.g., via prefers-color-scheme) updates the UI instantly.
</verification>

<success_criteria>

- Theme configuration is isolated in `src/theme.ts`.
- MUI components use CSS variables for their styles.
  </success_criteria>

<output>
After completion, create `.planning/phases/02-core-modernization/02-03-SUMMARY.md`
</output>
