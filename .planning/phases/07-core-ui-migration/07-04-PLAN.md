---
phase: 07-core-ui-migration
plan: 04
type: execute
wave: 4
depends_on: ["07-03"]
files_modified:
  [
    "src/features/EntityCard/SensorDisplay.tsx",
    "src/features/EntityCard/EntityCard.tsx",
  ]
autonomous: true
must_haves:
  truths:
    - "SensorDisplay uses a stacked layout (Label on top, Value at bottom)"
    - "Dashboard spacing is compact and consistent"
    - "Dark mode is synchronized with Home Assistant theme"
    - "Cards show skeleton screens during loading"
  artifacts:
    - path: "src/features/EntityCard/SensorDisplay.tsx"
      provides: "Stacked sensor layout"
  key_links:
    - from: "src/features/EntityCard/EntityCard.tsx"
      to: "shadcn Skeleton"
      via: "Loading states"
---

<objective>
Refactor SensorDisplay to a stacked layout and perform final UI polishing for Phase 7.

Purpose: Completes the core UI migration by ensuring sensors are properly displayed and overall visual consistency is achieved.
Output: Stacked SensorDisplay and polished dashboard layout.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@src/features/EntityCard/SensorDisplay.tsx
@src/features/EntityCard/EntityCard.tsx
@.planning/phases/07-core-ui-migration/07-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor SensorDisplay to Stacked Layout</name>
  <files>src/features/EntityCard/SensorDisplay.tsx</files>
  <action>
    - Implement "Stacked Layout" decision: Label on top (smaller, muted), Value at the bottom (prominent).
    - Ensure "Pure Info" decision is met: Remove any legacy MUI Box padding or font-size overrides that don't fit the new stacked pattern.
    - Style using Tailwind v4 classes for typography and spacing.
    - Ensure the layout is clean and aligns with the Icon Priority established in EntityCard.
  </action>
  <verify>Check that temperature/humidity sensors display their label and value in a stacked format.</verify>
  <done>SensorDisplay.tsx uses a modern stacked layout with Tailwind v4 styling.</done>
</task>

<task type="auto">
  <name>Task 2: UI Polishing and Dark Mode Verification</name>
  <files>src/features/EntityCard/EntityCard.tsx</files>
  <action>
    - Implement "Skeleton Screens" for loading states in EntityCard using shadcn-like skeleton patterns.
    - Fine-tune "Compact (Efficiency)" spacing across the dashboard to ensure it feels dense but organized.
    - Verify dark mode specific border colors and background tints are using the correct Home Assistant native CSS variables (e.g., `--ha-card-border-color`).
    - Apply "Subtle Feedback" hover states globally to cards if not already complete.
  </action>
  <verify>Observe the dashboard in both light and dark modes (synced with HA) and check for skeleton screens during initial load.</verify>
  <done>Phase 7 UI migration is polished and meets all design goals.</done>
</task>

</tasks>

<verification>
Final walkthrough of the dashboard to ensure all migrated components (Panel, Grid, PowerSwitch, SensorDisplay) are visually consistent and functional.
</verification>

<success_criteria>
Core UI Migration is complete, polished, and adheres to all Phase 7 decisions.
</success_criteria>

<output>
After completion, create `.planning/phases/07-core-ui-migration/07-04-SUMMARY.md`
</output>
