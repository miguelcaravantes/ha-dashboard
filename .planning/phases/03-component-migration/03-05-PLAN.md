---
phase: 03-component-migration
plan: 05
type: execute
wave: 4
depends_on: ['03-04']
files_modified:
  [
    src/features/EntityRow.tsx,
    src/features/Icon.tsx,
    src/features/EntityIcon.tsx,
    src/features/ProfileImg.tsx,
    src/features/BinarySensor.tsx,
    src/features/Sensor.tsx,
  ]
autonomous: true

must_haves:
  truths:
    - 'Entire codebase is converted to TypeScript'
    - 'Project compiles with strict: true and noUncheckedIndexedAccess'
    - 'All components follow established modern patterns (Grid v2, Typed Entities)'
  artifacts:
    - path: 'src/features/Sensor.tsx'
      provides: 'Strictly typed sensor display'
  key_links:
    - from: 'tsconfig.json'
      to: 'src/**/*.tsx'
      via: 'Strict type checking'
---

<objective>
Complete the migration of all remaining components to TSX and perform final strict mode verification.
This ensures the entire application is fully type-safe and consistent with the new patterns established in earlier plans.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/features/EntityRow.jsx
@src/features/Sensor.jsx
@src/features/BinarySensor.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Remaining Small Components</name>
  <files>src/features/EntityRow.tsx, src/features/Icon.tsx, src/features/EntityIcon.tsx, src/features/ProfileImg.tsx, src/features/BinarySensor.tsx, src/features/Sensor.tsx</files>
  <action>
    Rename the remaining .jsx files to .tsx.
    Apply strict typing to props and internal logic.
    Ensure they use the typed useEntity hook and follow the Grid v2 patterns if applicable.
  </action>
  <verify>Run `npx tsc --noEmit` and ensure no errors.</verify>
  <done>All components are now TSX.</done>
</task>

<task type="auto">
  <name>Task 2: Final Strict Mode Audit</name>
  <files>src/**/*</files>
  <action>
    Run a full project type check.
    Resolve any "Object is possibly 'undefined'" errors caused by `noUncheckedIndexedAccess` (e.g., in array mapping or object property access).
    Ensure no `any` types remain in the migrated components.
  </action>
  <verify>Run `npm run lint` and `npx tsc --noEmit`.</verify>
  <done>Codebase passes strict type checking and linting.</done>
</task>

<task type="auto">
  <name>Task 3: Production Build Verification</name>
  <files>dist/**/*</files>
  <action>
    Run `npm run build` to ensure the production build still works after the migration.
    Check for any unexpected bundle size increases or build-time warnings.
  </action>
  <verify>Build completes successfully without errors.</verify>
  <done>Project is ready for optimization phase.</done>
</task>

</tasks>

<verification>
Run `npx tsc --noEmit`.
Run `npm run build`.
</verification>

<success_criteria>

- No .jsx or .js files remain in the src directory (except maybe trivial config).
- Production build succeeds.
- Strict type checking passes globally.
  </success_criteria>

<output>
After completion, create `.planning/phases/03-component-migration/03-05-SUMMARY.md`
</output>
