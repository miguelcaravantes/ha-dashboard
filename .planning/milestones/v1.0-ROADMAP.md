# Milestone v1.0: Foundation & Modernization

**Status:** âœ… SHIPPED 2026-01-28
**Phases:** 1-3
**Total Plans:** 11

## Overview

This milestone executed the "Big Bang" modernization of the Home Assistant React Dashboard. The strategy involved establishing modern infrastructure (Vite 7/Node 22), upgrading the core runtime (React 19/MUI v7), and performing a comprehensive migration of all UI components to strict TypeScript with modern responsive patterns.

## Phases

### Phase 1: Infrastructure Foundation

**Goal**: Developer environment and build pipeline support modern stack.
**Depends on**: None
**Plans**: 3 plans

Plans:

- [x] 01-01: Node.js environment & legacy cleanup
- [x] 01-02: Vite 7 upgrade & modern build config
- [x] 01-03: ESLint 9 Flat Config with TS support

**Details:**
This phase replaces the legacy build system with Vite 7 and aligns the Node.js environment, ensuring a stable foundation before code changes begin.

### Phase 2: Core Modernization

**Goal**: Application runtime powers React 19 and MUI v7 with typed data.
**Depends on**: Phase 1
**Plans**: 3 plans

Plans:

- [x] 02-01: Core Foundation Upgrade (React 19 & MUI v7)
- [x] 02-02: Type-Safe Data Layer (HassProvider & useSyncExternalStore)
- [x] 02-03: CSS Variable Theming (Modern Engine Migration)

**Details:**
This phase upgrades the primary dependencies and establishes the global data layer, enabling the new theming engine and type-safe `hass` injection.

### Phase 3: Component Migration

**Goal**: UI components are type-safe, responsive, and use modern patterns.
**Depends on**: Phase 2
**Plans**: 5 plans

Plans:

- [x] 03-01: Entity Typing & Strict Foundation
- [x] 03-02: Layout & Dashboard Migration
- [x] 03-03: Entity Card & Sub-components Migration
- [x] 03-04: Detail Views & Actions Migration
- [x] 03-05: Remaining Components & Strict Finalization

**Details:**
This is the bulk of the work, migrating components to strict TypeScript, implementing new hooks, and adopting modern UI patterns like Grid v2 and Container Queries.

---

## Milestone Summary

**Key Decisions:**

- **Infrastructure First:** Established stable build and linting rules before touching component code.
- **Big Bang TS Migration:** Opted for a full conversion given the codebase size (~8-10 core files).
- **MUI v7 & CSS Variables:** Adopted the latest UI patterns early to avoid immediate technical debt.
- **React 19 Actions:** Standardized on `useActionState` and `useTransition` for all Home Assistant service calls.

**Issues Resolved:**

- Fixed legacy build hangs by moving to Vite 7.
- Resolved type leakage in `hass` object injection via strict interface definitions.
- Fixed inconsistent responsive behavior by adopting CSS Container Queries in `EntityCard`.

**Issues Deferred:**

- **Pigment CSS:** Deferred to a later optimization phase to focus on type safety and React 19 core features.
- **React Compiler:** Deferred due to phase cancellation, can be added later as an incremental optimization.

**Technical Debt Incurred:**

- Used type casting for some complex third-party library interop (e.g., `awesome-debounce-promise`) where types were missing or incompatible with `NodeNext`.
- Maintained some `.js` extensions in imports for ESM compatibility which might need revisiting if build tools evolve.

---

_For current project status, see .planning/STATE.md_
